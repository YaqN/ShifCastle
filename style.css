/* --- Confetti / Checklist / Timers / Photo Booth / Message (same logic) --- */
/* shortened here for space but identical to the working one you had */

/******* Compliment Jar — supportive, encouraging tone *******/
(()=>{
  const drawBtn = document.getElementById('drawFortune');
  const addForm = document.getElementById('addFortuneForm');
  const addInput = document.getElementById('addFortune');
  const out = document.getElementById('fortuneText');
  if(!drawBtn || !addForm || !addInput || !out) return;

  const qualities = [
    'kindness','patience','calmness','clarity','empathy','integrity','focus',
    'reliability','thoughtfulness','optimism','fairness','dedication',
    'discipline','honesty','respectfulness','consistency','humility','balance',
    'care for others','sense of responsibility','practical wisdom'
  ];

  const strengths = [
    'make challenges manageable','bring steadiness to busy days',
    'notice details others miss','find solutions with care',
    'help people feel heard','build trust quietly',
    'bring a sense of order','stay calm when things change',
    'keep goals realistic','think before reacting',
    'follow through on promises','lead by example',
    'improve the atmosphere around you','approach work thoughtfully',
    'turn ideas into clear steps','lift people’s spirits just by being yourself'
  ];

  const closers = [
    'That has real impact.',
    'It makes a genuine difference.',
    'It’s something people appreciate.',
    'That quality stands out.',
    'It helps more than you know.',
    'It sets a positive example.',
    'That makes things better for everyone.',
    'It’s quietly impressive.'
  ];

  const starters = [
    'You have a way of','You consistently','You’re great at','You naturally',
    'You always seem to','You bring','You model','You show',
    'You remind others to','You make it easier to'
  ];

  function cap(s){return s.charAt(0).toUpperCase()+s.slice(1)}

  function generateSupportive(n=150){
    const set = new Set();
    const base = [
      'You show up with reliability every time.',
      'You treat people with respect and patience.',
      'You help conversations stay constructive.',
      'You handle unexpected moments gracefully.',
      'You make the environment calmer and more focused.',
      'You approach problems with quiet confidence.',
      'You care about doing things properly, not just quickly.',
      'You listen — really listen.',
      'You bring out the best in people around you.',
      'You lead with steadiness rather than noise.'
    ];
    base.forEach(b=>set.add(b));

    let guard=0;
    while(set.size<n && guard<5000){
      guard++;
      const type=Math.floor(Math.random()*3);
      let line='';
      if(type===0){
        line=`${starters[Math.floor(Math.random()*starters.length)]} ${strengths[Math.floor(Math.random()*strengths.length)]}. ${closers[Math.floor(Math.random()*closers.length)]}`;
      }else if(type===1){
        line=`Your ${qualities[Math.floor(Math.random()*qualities.length)]} really shows. ${closers[Math.floor(Math.random()*closers.length)]}`;
      }else{
        line=`It’s clear you ${strengths[Math.floor(Math.random()*strengths.length)]}. ${closers[Math.floor(Math.random()*closers.length)]}`;
      }
      set.add(cap(line.replace(/\s+/g,' ').trim()));
    }
    return Array.from(set);
  }

  let fortunes = JSON.parse(localStorage.getItem('fortunes')||'null');
  if(!fortunes || fortunes.length<30){
    fortunes = generateSupportive(160);
    localStorage.setItem('fortunes', JSON.stringify(fortunes));
  }
  const save=()=>localStorage.setItem('fortunes',JSON.stringify(fortunes));

  drawBtn.addEventListener('click',()=>{
    if(!fortunes.length) fortunes=generateSupportive(160);
    const idx=Math.floor(Math.random()*fortunes.length);
    out.textContent=fortunes.splice(idx,1)[0];
    save();
    window._burst?.(innerWidth*0.6, innerHeight*0.65, 60);
  });

  addForm.addEventListener('submit',e=>{
    e.preventDefault();
    const v=addInput.value.trim();
    if(!v)return;
    fortunes.push(v); save(); addForm.reset();
  });
})();
